package org.runmyprocess.test;

import junit.framework.TestCase;
import org.runmyprocess.json.JSONArray;
import org.runmyprocess.json.JSONObject;
import org.runmyprocess.json.parser.StreamParser;

import java.io.ByteArrayInputStream;
import java.io.UnsupportedEncodingException;

/**
 * User: sgaide & dboulay
 * Date: 26/03/13
 * Time: 17:38
 */
public class StreamParserTest extends TestCase {

    public final static String STRING_OBJECT = "{\"login\":\"herve.gonay@webleads-tracker.com\",\"password\":\"Pierre90Iax8rPdZAHu8zZXEfcMoot45\",\"sessionid\":\"00D20000000Ns2s!AQ0AQC9HfqvR39pAF.pchzuhcyOTxKz2dA8EVpY3CJJkGMvsf_0kw_s2.BvHFsXMpxYcrIQP1RT0JAEO85LQu_dOtZ8r6Elu\",\"urlstart\":\"https://eu1\",\"urlsf\":\"https://eu1-api.salesforce.com/services/Soap/c/18.0/00D20000000Ns2s/0DFA0000000Grtu\",\"query\":\"select email,Email_Rapport_GetPlus__c from Contact where AccountId='001D000000y4hHh'\",\"url\":\"https://eu1-api.salesforce.com/services/Soap/c/18.0/00D20000000Ns2s/0DFA0000000Grtu\",\"abonnement\":\"GETPLUS GOLD\",\"offre_test\":\"oui\",\"option\":\"NONE\",\"go\":\"true\",\"dbg_pricing\":{\"Envelope\":{\"Body\":{\"queryResponse\":{\"result\":{\"queryLocator\":{\"@nil\":\"true\"},\"done\":\"true\",\"records\":{\"Date_Fin_Abo__c\":\"2012-11-23\",\"Account__c\":\"001D000000y4hHhIAI\",\"Date_Debut_Abo__c\":\"2012-11-08\",\"@type\":\"sf:Pricing__c\",\"Abonnement__c\":\"GETPLUS TEST\",\"Id\":{\"@nil\":\"true\"},\"Option_getplus__c\":\"NONE\"},\"size\":\"1\"}}},\"Header\":\"\"}},\"object\":\"Visite__c\",\"operation\":\"query\",\"type\":\"CSV\",\"urljob\":\"https://eu1-api.salesforce.com/services/async/21.0/job/\",\"urljob_id\":\"https://eu1-api.salesforce.com/services/async/21.0/job/750D0000000Jv2lIAC\",\"content\":\"select Visit_Date__c,Referrer_Search__c,Actions__c,Time_Total__c,Webleads_URL_Secure__c,S_Company_Name__c,CORPORAMA_GETPLUS__c,S_Address__c,S_Codop__c,S_City__c,S_VISITOR_WEBSITE__c,S_STAFFING_CATEGORY__c,S_NAF_L5__c,S_LABEL_NAF_L5__c,S_SIREN__c,Goals_completed__c from Visite__c where Account__c='001D000000y4hHh' and Type__c='COMPANY' and DAY_ONLY(Visit_Date__c)=2012-11-19 order by RS_Size__c, Time_Total__c DESC\",\"content_email\":\"\",\"urlbatch\":\"https://eu1-api.salesforce.com/services/async/21.0/job/750D0000000Jv2lIAC/batch/751D00000011ompIAA/result/752D0000000TpkY\",\"batch_id\":\"751D00000011ompIAA\",\"log\":\"Completed\",\"result_id\":\"752D0000000TpkY\",\"file_id\":\"9077c1c0-32f5-11e2-a6d3-123139225512\",\"myfile_size\":\"1\",\"wl_nb\":\"8\",\"size\":\"1\",\"email_list\":\"commercial@billardy.com\",\"old_size\":\"\",\"body_dyn\":\"<tr> <td width='18%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Société <\\/td> <td width='18%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Mots clés <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Temps total <\\/td> <td width='10%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Tranche d'effectif <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Site <\\/td> <td width='18%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Ville <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Détail visite <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Horaire visite <\\/td> <\\/tr><tr><td height='10' style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><br><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><\\/tr><tr><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><a href='http://corporama.com/search?partner=getplus532&embedded=1&ui.bottom=0&ui.search=0&ui.top=1&ui.top_bar=0&ui.top_links=0&getuser=BILLARDY&company=228900015&social_pro.include=' TARGET='_blank' style='color: #4e88e9;font-weight: normal;text-decoration: underline;'>DEPARTEMENT DE L YONNE<\\/a><\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>[secure search]<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>40<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>1000 +<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><a href='http://www.cg89.fr' TARGET='_blank' style='color: #4e88e9;font-weight: normal;text-decoration: underline;'>www<\\/a><\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>Auxerre<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><a href='http://stats.webleads-tracker.com/stats/visitors-actions?site_id=100545883&session_id=383272043&sitekey=80de61429fde2df0' TARGET='_blank' style='color: #4e88e9;font-weight: normal;text-decoration: underline;'><img src='http://www.getplus.fr/docs/mail/plus.gif' alt='+' title='Cliquez pour + de détails' style='border: 0;height: auto;line-height: 100%;outline: 0;text-decoration: none;display: inline;'><\\/a><\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>16:18<\\/td><\\/tr><tr><td height='10' style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><br><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><\\/tr><\\/table>\",\"body\":\"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\\r<html>\\r<head>\\r<meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\">\\r<meta name=\\\"Viewport\\\" content=\\\"width=850\\\">\\r<title>Objet de l'email<\\/title>\\r<\\/head>\\r<body leftmargin=\\\"0\\\" marginwidth=\\\"0\\\" topmargin=\\\"0\\\" marginheight=\\\"0\\\" offset=\\\"0\\\" style=\\\"-webkit-text-size-adjust: none;margin: 0;padding: 0;background-color: #FFFFFF;width: 100%;\\\">\\r<center>\\r<table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"main\\\" style=\\\"margin: 0;padding: 0;background-color: #FFFFFF;height: 100%;width: 100%;\\\">\\r  <tr>\\r    <td valign=\\\"top\\\" align=\\\"center\\\" style=\\\"border-collapse: collapse;\\\">\\r    <!-- Debut contenu -->\\r    <table width=\\\"96%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"contenu\\\">\\r      <tr>\\r        <td style=\\\"border-collapse: collapse;\\\">\\r            <!-- Debut header -->\\r            <table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"header\\\" style=\\\"background-color: #FFFFFF;border-bottom: 0;color: #666666;font-family: Arial, Helvetica, sans-serif;font-size: 18px;font-weight: normal;line-height: 150%;padding: 0;text-align: left;vertical-align: middle;\\\">\\r              <tr>\\r                <!-- Debut header gauche -->\\r                <td width=\\\"200\\\" valign=\\\"bottom\\\" align=\\\"left\\\" style=\\\"border-collapse: collapse;\\\">\\r                <a href=\\\"http://www.getplus.fr\\\" target=\\\"_blank\\\" style=\\\"color: #666666;font-weight: normal;text-decoration: none;\\\"><img id=\\\"#headerImage\\\" src=\\\"http://www.getplus.fr/docs/mail/getplus.jpg\\\" alt=\\\"Get+\\\" title=\\\"Get+\\\" width=\\\"153\\\" height=\\\"97\\\" style=\\\"border: 0;height: auto;line-height: 100%;outline: 0;text-decoration: none;\\\"><\\/a>\\r                <\\/td>\\r                <!-- Fin header gauche -->\\r                <!-- Debut header droit -->\\r                <td valign=\\\"bottom\\\" align=\\\"left\\\" style=\\\"border-collapse: collapse;\\\">\\r                    <table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"header\\\" style=\\\"background-color: #FFFFFF;border-bottom: 0;color: #666666;font-family: Arial, Helvetica, sans-serif;font-size: 18px;font-weight: normal;line-height: 150%;padding: 0;text-align: left;vertical-align: middle;\\\">\\r                      <tr>\\r                        <td style=\\\"border-collapse: collapse;\\\">\\r                        <span style=\\\"color: #4b8df9;\\\">Visites<\\/span> du 19/11/2012\\r                        <\\/td>\\r                      <\\/tr>\\r                      <tr>\\r                        <td style=\\\"border-collapse: collapse;\\\">\\r                        <span style=\\\"color: #4b8df9;\\\">Société<\\/span> <strong><a href=\\\"#\\\" target=\\\"_blank\\\" style=\\\"color: #666666;font-weight: normal;text-decoration: none;\\\">BILLARDY<\\/a><\\/strong>\\r                        <\\/td>\\r                      <\\/tr>\\r\\t\\t\\t\\t\\t  <tr>\\r                        <td style=\\\"border-collapse: collapse;\\\">\\r                        <span style=\\\"color: #4b8df9;\\\">1 visite identifiée<\\/span> <strong><a href=\\\"#\\\" target=\\\"_blank\\\" style=\\\"color: #666666;font-weight: normal;text-decoration: none;\\\"> - 7 non identifiables (particuliers, professions libérales, commerçants, Tpe, petites Pme ou non référencées)<\\/a><\\/strong>\\r                        <\\/td>\\r                      <\\/tr>\\r                    <\\/table>\\r                <\\/td>\\r                <!-- Fin header droit -->\\r              <\\/tr>\\r            <\\/table>\\r            <!-- Fin header -->\\r          \\r          <\\/td>\\r        <\\/tr>\\r        <tr><td height=\\\"40\\\" style=\\\"border-collapse: collapse;\\\">\\r<\\/td><\\/tr>\\r        <tr>\\r          <td style=\\\"border-collapse: collapse;\\\">\\r              <!-- Debut detail -->\\r            <table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"detail\\\" style=\\\"background-color: #4e88e9;border-bottom: 0;color: #FFFFFF;font-family: Arial, Helvetica, sans-serif;font-size: 18px;font-weight: normal;line-height: 100%;padding: 0;text-align: center;vertical-align: middle;text-transform: uppercase;\\\">\\r              <tr>\\r                <td height=\\\"2\\\" style=\\\"border-collapse: collapse;\\\">\\r                <\\/td>\\r              <\\/tr>\\r              <tr>\\r                <td height=\\\"1\\\" bgcolor=\\\"#7aa6ef\\\" style=\\\"border-collapse: collapse;\\\">\\r                <\\/td>\\r              <\\/tr>\\r              <tr>\\r                <td height=\\\"37\\\" align=\\\"center\\\" valign=\\\"middle\\\" style=\\\"border-collapse: collapse;\\\">\\r                    <a href=\\\"#\\\" target=\\\"_blank\\\" style=\\\"color: #FFFFFF;font-weight: normal;text-decoration: none;\\\">Détail des visites<\\/a>\\r                <\\/td>\\r              <\\/tr>\\r            <\\/table>\\r            <!-- Fin footer -->\\r          <\\/td>\\r        <\\/tr>\\r        <tr><td height=\\\"20\\\" style=\\\"border-collapse: collapse;\\\">\\r<\\/td><\\/tr>\\r        <tr>\\r          <td style=\\\"border-collapse: collapse;\\\">\\r            <!-- Debut tableau -->\\r            <table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"tableau\\\" align=\\\"center\\\" style=\\\"background-color: #fff;color: #505050;font-family: Arial, Helvetica, sans-serif;font-size: 14px;line-height: 100%;text-align: center;border: 1px solid #c0cfe8;\\\">\\r               <tr> <td width='18%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Société <\\/td> <td width='18%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Mots clés <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Temps total <\\/td> <td width='10%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Tranche d'effectif <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Site <\\/td> <td width='18%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Ville <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Détail visite <\\/td> <td width='9%' class='entete' style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;color: #4e88e9;background-color: #eeeff0;'> Horaire visite <\\/td> <\\/tr><tr><td height='10' style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><br><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><\\/tr><tr><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><a href='http://corporama.com/search?partner=getplus532&embedded=1&ui.bottom=0&ui.search=0&ui.top=1&ui.top_bar=0&ui.top_links=0&getuser=BILLARDY&company=228900015&social_pro.include=' TARGET='_blank' style='color: #4e88e9;font-weight: normal;text-decoration: underline;'>DEPARTEMENT DE L YONNE<\\/a><\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>[secure search]<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>40<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>1000 +<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><a href='http://www.cg89.fr' TARGET='_blank' style='color: #4e88e9;font-weight: normal;text-decoration: underline;'>www<\\/a><\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>Auxerre<\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><a href='http://stats.webleads-tracker.com/stats/visitors-actions?site_id=100545883&session_id=383272043&sitekey=80de61429fde2df0' TARGET='_blank' style='color: #4e88e9;font-weight: normal;text-decoration: underline;'><img src='http://www.getplus.fr/docs/mail/plus.gif' alt='+' title='Cliquez pour + de détails' style='border: 0;height: auto;line-height: 100%;outline: 0;text-decoration: none;display: inline;'><\\/a><\\/td><td style='border-collapse: collapse;height: 40px;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'>16:18<\\/td><\\/tr><tr><td height='10' style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><br><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><td style='border-collapse: collapse;border-right: 1px solid #c0cfe8;text-align: center;vertical-align: middle;'><\\/td><\\/tr><\\/table>\\r          <\\/td>\\r        <\\/tr>\\r        <tr><td height=\\\"40\\\" valign=\\\"bottom\\\" style=\\\"border-collapse: collapse;\\\">\\r        \\t<hr color=\\\"#c9c9c9\\\" size=\\\"1\\\" style=\\\"color: #c9c9c9;\\\">\\r        <\\/td><\\/tr>\\r        <tr>\\r          <td style=\\\"border-collapse: collapse;\\\">\\r            <!-- Debut footer -->\\r            <table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" id=\\\"footer\\\" style=\\\"background-color: #fff;border-top: 0;color: #a6a6a6;font-family: Arial, Helvetica, sans-serif;font-size: 12px;line-height: 150%;text-align: center;\\\">\\r              <tr>\\r                <td style=\\\"border-collapse: collapse;\\\">\\r                    <a href=\\\"http://www.getplus.fr\\\" target=\\\"_blank\\\" style=\\\"color: #4e88e9;font-weight: normal;text-decoration: underline;\\\">www.getplus.fr<\\/a>\\r                <\\/td>\\r              <\\/tr>\\r              <tr>\\r                <td style=\\\"border-collapse: collapse;\\\">\\r                    Copyright Get+ by Webleads - <a href=\\\"http://www.getplus.fr/Tableau-Comparatif_a23.html\\\" target=\\\"_blank\\\" class=\\\"upgrade\\\" style=\\\"color: #a6a6a6;font-weight: normal;text-decoration: underline;\\\">Up-grader votre solution<\\/a>\\r                <\\/td>\\r              <\\/tr> \\r            <\\/table>\\r            <!-- Fin footer -->\\r            <\\/td>\\r          <\\/tr>\\r        <\\/table>\\r    <!-- Fin contenu -->\\r    <\\/td>\\r  <\\/tr>\\r<\\/table>\\r<\\/center>\\r<\\/body>\\r<\\/html>\"}";

    public void testStreamParser() throws UnsupportedEncodingException {
        ByteArrayInputStream bai = new ByteArrayInputStream(STRING_OBJECT.getBytes());
        JSONObject object = JSONObject.parse(new StreamParser(bai, "UTF-8"));
        assertEquals(31, object.size());
    }

    public void testStreamParserArray() throws UnsupportedEncodingException {
        String o = "[1,2,3,-1,-2.2,-3.4e5,4.52e-4,6.7E8]";
        ByteArrayInputStream bai = new ByteArrayInputStream(o.getBytes());
        JSONArray object = JSONArray.parse(new StreamParser(bai, "UTF-8"));
        assertEquals( 8, object.size());
    }
}
